<h1><%= link_to 'Users', [:admin, :users] %> &raquo; User Details</h1>

<div style="float: right; padding: 2em;">
  <%= form_for [:admin, @user], :method => 'DELETE' do %>
    <input value="Delete User Permanently" type="submit" onclick="return confirm('Are you sure you want to completely delete this user?');" />
  <% end %>
</div>

<%= link_to 'Change Password', "/admin/users/#{@user.id}/edit" %>

<table class="fields">
  <tr>
    <th>Name</th>
    <td><%= @user.name %></td>
  </tr>
  <tr>
    <th>Email</th>
    <td><%= @user.email %> <%= link_to 'Change', edit_admin_user_path(@user) %></td>
  </tr>
  <tr>
    <th>Salesforce ID</th>
    <td><%= @user.salesforce_id %> <%= link_to 'Change', edit_admin_user_path(@user) %></td>
  </tr>
</table>

  <p>Use with care, the user might get emailed or you could change info on their behalf.</p>
  <%= form_for [:admin, @user], :method => 'POST', url: admin_impersonate_path(@user) do %>
    <%
     enrollment = Enrollment.find_by_user_id(params[:id])
     if enrollment && enrollment.explicitly_submitted
    %>
      <label><input type="checkbox" name="unsubmit_application" /> Check this to unsubmit the application so you can resubmit as the user, which allows resyncing to Salesforce (double check the SF id above because this should work automatically.)</label>
    <% end %>
    <br />
    <input value="Impersonate User" type="submit" />
  <% end %>
