<h1><a href="/admin/users">Users</a> &raquo; User Details</h1>

<div style="float: right; padding: 2em;">
  <form action="/admin/users/<%=@user.id%>" method="POST">
    <input type="hidden" name="_method" value="DELETE" />
    <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>" />
    <input value="Delete User Permanently" type="submit" onclick="return confirm('Are you sure you want to completely delete this user?');" />
  </form>
</div>

<table class="fields">
  <tr>
    <th>Name</th>
    <td><%= @user.name %></td>
  </tr>
  <tr>
    <th>Email</th>
    <td><%= @user.email %></td>
  </tr>
  <tr>
    <th>Fast tracked</th>
    <td><% if @user.fast_tracked %>
      Yes, interview waived
        <form action="/admin/users/<%=@user.id%>" method="POST">
          <input type="hidden" name="_method" value="PATCH" />
          <input type="hidden" name="user[fast_tracked]" value="false" />
          <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>" />
          <button>Undo</button>
        </form>
      <% else %>
      No
        <form action="/admin/users/<%=@user.id%>" method="POST">
          <input type="hidden" name="_method" value="PATCH" />
          <input type="hidden" name="user[fast_tracked]" value="true" />
          <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>" />
          <button>Fast track user</button>
        </form>
    <% end %></td>
  </tr>

  <tr>
    <th>Confirmed availability</th>
    <td><% if @user.program_attendance_confirmed %>
      Yes
    <% else %>
      No
      <% if @user.acceptance_requested %>
        (waiting for user to confirm)
      <% end %>
      <form action="/admin/users/<%=@user.id%>" method="POST">
        <input type="hidden" name="_method" value="PATCH" />
        <input type="hidden" name="user[acceptance_requested]" value="true" />
        <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>" />
        <button>Request confirmation of availability now by email</button>
      </form>
      <!-- reminders will be sent based on an outside timer when we get closer to the deadline -->
    <% end %>
  </tr>

  <tr>
    <th>Accepted</th>
    <td><% if @user.accepted_into_program %>
      Yes
      <% elsif @user.declined_from_program %>
      Declined
      <% else %>
      Not yet
        <% if @user.program_attendance_confirmed %>
          <form action="/admin/users/<%=@user.id%>" method="POST">
            <input type="hidden" name="_method" value="PATCH" />
            <input type="hidden" name="user[accepted_into_program]" value="true" />
            <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>" />
            <button>Accept now</button>
          </form>

          <form action="/admin/users/<%=@user.id%>" method="POST">
            <input type="hidden" name="_method" value="PATCH" />
            <input type="hidden" name="user[declined_from_program]" value="true" />
            <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>" />
            <button>Decline</button>
          </form>
        <% else %>
          (Pending user confirmation)
        <% end %>

    <% end %></td>
  </tr>
</table>

<% if @user.coach %>
  Coached by: <a href="/admin/users/<%=@user.coach.id%>"><%= @user.coach.name %></a><br />
<% end %>

<a href="/admin/users/<%=@user.id%>/students">Students this user is Coaching...</a>
